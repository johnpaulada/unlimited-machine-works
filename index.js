"use strict";var regeneratorRuntime=require("regenerator-runtime");function _interopDefault(r){return r&&"object"==typeof r&&"default"in r?r.default:r}regeneratorRuntime=_interopDefault(require("regenerator-runtime/runtime"));var _this=void 0;function _toConsumableArray(r){if(Array.isArray(r)){for(var e=0,n=Array(r.length);e<r.length;e++)n[e]=r[e];return n}return Array.from(r)}function _asyncToGenerator(r){return function(){var e=r.apply(this,arguments);return new Promise(function(r,n){return function t(a,o){try{var i=e[a](o),u=i.value}catch(r){return void n(r)}if(!i.done)return Promise.resolve(u).then(function(r){t("next",r)},function(r){t("throw",r)});r(u)}("next")})}}function _defineProperty(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var make=function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={},t=r||{},a=null,o=[],i=function(r){if(r in n)throw new Error("State already exists: "+r);var e={},o={addTransition:function(r,n,a){e=Object.assign({},e,_defineProperty({},r,function(){for(var r=arguments.length,e=Array(r),o=0;o<r;o++)e[o]=arguments[o];return[n,a?a.apply(void 0,[t].concat(e)):t]}))},get name(){return r},get transitions(){return e}};return a||(a=o),n[r]=o,o};if(e){for(var u in e)i(u);for(var f in e){var c=n[f],s=e[f];for(var l in s)c.addTransition(l,n[s[l].to],s[l].action)}}return{is:function(r){return a.name===r},get:function(r){if(r in t)return t[r];throw new Error(r+" does not exist.")},get actions(){return a.transitions?Object.keys(a.transitions):[]},get states(){return Object.keys(n)},get data(){return t},makeState:i,do:function(r){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var u=a.transitions;if(r in u){var f=u[r].apply(void 0,n);a=f[0],t=f[1],o.forEach(function(r){_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r(a.name,t));case 1:case"end":return e.stop()}},e,_this)}))()})}},addSubscriber:function(r){o=[].concat(_toConsumableArray(o),[r])}}},UMW=Object.freeze({make:make,summon:make});module.exports=UMW;
