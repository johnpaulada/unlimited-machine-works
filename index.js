"use strict";var _this=void 0;function _toConsumableArray(r){if(Array.isArray(r)){for(var n=0,t=Array(r.length);n<r.length;n++)t[n]=r[n];return t}return Array.from(r)}function _asyncToGenerator(r){return function(){var n=r.apply(this,arguments);return new Promise(function(r,t){return function e(a,o){try{var i=n[a](o),u=i.value}catch(r){return void t(r)}if(!i.done)return Promise.resolve(u).then(function(r){e("next",r)},function(r){e("throw",r)});r(u)}("next")})}}function _defineProperty(r,n,t){return n in r?Object.defineProperty(r,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[n]=t,r}var make=function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t={},e=r||{},a=null,o=[],i=function(r){if(r in t)throw new Error("State already exists: "+r);var n={},o={addTransition:function(r,t,a){n=Object.assign({},n,_defineProperty({},r,function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return[t,a?a.apply(void 0,[e].concat(n)):e]}))},get name(){return r},get transitions(){return n}};return a||(a=o),t[r]=o,o};if(n){for(var u in n)i(u);for(var s in n){var c=t[s],f=n[s];for(var v in f)c.addTransition(v,t[f[v].to],f[v].action)}}return{is:function(r){return a.name===r},get:function(r){if(r in e)return e[r];throw new Error(r+" does not exist.")},get actions(){return a.transitions?Object.keys(a.transitions):[]},get states(){return Object.keys(t)},get data(){return e},makeState:i,do:function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),i=1;i<n;i++)t[i-1]=arguments[i];var u=a.transitions;if(r in u){var s=u[r].apply(void 0,t);a=s[0],e=s[1],o.forEach(function(r){_asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",r(a.name,e));case 1:case"end":return n.stop()}},n,_this)}))()})}},addSubscriber:function(r){o=[].concat(_toConsumableArray(o),[r])}}},UMW=Object.freeze({make:make,summon:make});module.exports=UMW;
