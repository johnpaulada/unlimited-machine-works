import regeneratorRuntime from"regenerator-runtime/runtime";var _this=void 0;function _toConsumableArray(r){if(Array.isArray(r)){for(var n=0,e=Array(r.length);n<r.length;n++)e[n]=r[n];return e}return Array.from(r)}function _asyncToGenerator(r){return function(){var n=r.apply(this,arguments);return new Promise(function(r,e){return function t(a,o){try{var i=n[a](o),u=i.value}catch(r){return void e(r)}if(!i.done)return Promise.resolve(u).then(function(r){t("next",r)},function(r){t("throw",r)});r(u)}("next")})}}function _defineProperty(r,n,e){return n in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}var make=function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e={},t=r||{},a=null,o=[],i=function(r){if(r in e)throw new Error("State already exists: "+r);var n={},o={addTransition:function(r,e,a){n=Object.assign({},n,_defineProperty({},r,function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return[e,a?a.apply(void 0,[t].concat(n)):t]}))},get name(){return r},get transitions(){return n}};return a||(a=o),e[r]=o,o};if(n){for(var u in n)i(u);for(var c in n){var f=e[c],s=n[c];for(var m in s)f.addTransition(m,e[s[m].to],s[m].action)}}return{is:function(r){return a.name===r},get:function(r){if(r in t)return t[r];throw new Error(r+" does not exist.")},get actions(){return a.transitions?Object.keys(a.transitions):[]},get states(){return Object.keys(e)},get data(){return t},makeState:i,do:function(r){for(var n=arguments.length,e=Array(n>1?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];var u=a.transitions;if(r in u){var c=u[r].apply(void 0,e);a=c[0],t=c[1],o.forEach(function(r){_asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",r(a.name,t));case 1:case"end":return n.stop()}},n,_this)}))()})}},addSubscriber:function(r){o=[].concat(_toConsumableArray(o),[r])}}},UMW=Object.freeze({make:make,summon:make});export default UMW;
