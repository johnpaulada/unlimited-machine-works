!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):n.UMW=r()}(this,function(){"use strict";var n=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t={},e=n||{},i=null,a=[],o=function(n){if(n in t)throw new Error("State already exists: "+n);var r={},a={addTransition:function(n,t,i){var a,o,u;r=Object.assign({},r,(u=function(){for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return[t,i?i.apply(void 0,[e].concat(r)):e]},(o=n)in(a={})?Object.defineProperty(a,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[o]=u,a))},get name(){return n},get transitions(){return r}};return i||(i=a),t[n]=a,a};if(r){for(var u in r)o(u);for(var f in r){var s=t[f],c=r[f];for(var d in c)s.addTransition(d,t[c[d].to],c[d].action)}}return{is:function(n){return i.name===n},get:function(n){if(n in e)return e[n];throw new Error(n+" does not exist.")},get actions(){return i.transitions?Object.keys(i.transitions):[]},get states(){return Object.keys(t)},get data(){return e},makeState:o,do:function(n){for(var r=arguments.length,t=Array(r>1?r-1:0),o=1;o<r;o++)t[o-1]=arguments[o];var u=i.transitions;if(n in u){var f=u[n].apply(void 0,t);i=f[0],e=f[1],a.forEach(function(n){n(i.name,e)})}},addSubscriber:function(n){a=[].concat(function(n){if(Array.isArray(n)){for(var r=0,t=Array(n.length);r<n.length;r++)t[r]=n[r];return t}return Array.from(n)}(a),[n])}}};return Object.freeze({make:n,summon:n})});
