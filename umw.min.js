var UMW=function(r){"use strict";r=(r=require("regenerator-runtime"))&&r.hasOwnProperty("default")?r.default:r;var n=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e={},a=n||{},i=null,o=[],u=function(r){if(r in e)throw new Error("State already exists: "+r);var n={},t={addTransition:function(r,t,e){var i,o,u;n=Object.assign({},n,(u=function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return[t,e?e.apply(void 0,[a].concat(n)):a]},(o=r)in(i={})?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i))},get name(){return r},get transitions(){return n}};return i||(i=t),e[r]=t,t};if(t){for(var c in t)u(c);for(var f in t){var s=e[f],v=t[f];for(var l in v)s.addTransition(l,e[v[l].to],v[l].action)}}return{is:function(r){return i.name===r},get:function(r){if(r in a)return a[r];throw new Error(r+" does not exist.")},get actions(){return i.transitions?Object.keys(i.transitions):[]},get states(){return Object.keys(e)},get data(){return a},makeState:u,do:function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),u=1;u<t;u++)e[u-1]=arguments[u];var c=i.transitions;if(n in c){var f=c[n].apply(void 0,e);i=f[0],a=f[1],o.forEach(function(n){var t;(t=r.mark(function t(){return r.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",n(i.name,a));case 1:case"end":return r.stop()}},t,void 0)}),function(){var r=t.apply(this,arguments);return new Promise(function(n,t){return function e(a,i){try{var o=r[a](i),u=o.value}catch(r){return void t(r)}if(!o.done)return Promise.resolve(u).then(function(r){e("next",r)},function(r){e("throw",r)});n(u)}("next")})})()})}},addSubscriber:function(r){o=[].concat(function(r){if(Array.isArray(r)){for(var n=0,t=Array(r.length);n<r.length;n++)t[n]=r[n];return t}return Array.from(r)}(o),[r])}}};return Object.freeze({make:n,summon:n})}(regeneratorRuntime);
