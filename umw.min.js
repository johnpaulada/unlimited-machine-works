var UMW=function(){"use strict";var r=function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t={},e=r||{},a=null,i=[],o=function(r){if(r in t)throw new Error("State already exists: "+r);var n={},i={addTransition:function(r,t,a){var i,o,u;n=Object.assign({},n,(u=function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return[t,a?a.apply(void 0,[e].concat(n)):e]},(o=r)in(i={})?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i))},get name(){return r},get transitions(){return n}};return a||(a=i),t[r]=i,i};if(n){for(var u in n)o(u);for(var c in n){var f=t[c],s=n[c];for(var v in s)f.addTransition(v,t[s[v].to],s[v].action)}}return{is:function(r){return a.name===r},get:function(r){if(r in e)return e[r];throw new Error(r+" does not exist.")},get actions(){return a.transitions?Object.keys(a.transitions):[]},get states(){return Object.keys(t)},get data(){return e},makeState:o,do:function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];var u=a.transitions;if(r in u){var c=u[r].apply(void 0,t);a=c[0],e=c[1],i.forEach(function(r){var n;(n=regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",r(a.name,e));case 1:case"end":return n.stop()}},n,void 0)}),function(){var r=n.apply(this,arguments);return new Promise(function(n,t){return function e(a,i){try{var o=r[a](i),u=o.value}catch(r){return void t(r)}if(!o.done)return Promise.resolve(u).then(function(r){e("next",r)},function(r){e("throw",r)});n(u)}("next")})})()})}},addSubscriber:function(r){i=[].concat(function(r){if(Array.isArray(r)){for(var n=0,t=Array(r.length);n<r.length;n++)t[n]=r[n];return t}return Array.from(r)}(i),[r])}}};return Object.freeze({make:r,summon:r})}();
