!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):r.UMW=n()}(this,function(){"use strict";var r=function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t={},e=r||{},i=null,o=[],a=function(r){if(r in t)throw new Error("State already exists: "+r);var n={},o={addTransition:function(r,t,i){var o,a,u;n=Object.assign({},n,(u=function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return[t,i?i.apply(void 0,[e].concat(n)):e]},(a=r)in(o={})?Object.defineProperty(o,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):o[a]=u,o))},get name(){return r},get transitions(){return n}};return i||(i=o),t[r]=o,o};if(n){for(var u in n)a(u);for(var f in n){var c=t[f],s=n[f];for(var d in s)c.addTransition(d,t[s[d].to],s[d].action)}}return{is:function(r){return i.name===r},get:function(r){if(r in e)return e[r];throw new Error(r+" does not exist.")},get actions(){return i.transitions?Object.keys(i.transitions):[]},get states(){return Object.keys(t)},get data(){return e},makeState:a,do:function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),a=1;a<n;a++)t[a-1]=arguments[a];var u=i.transitions;if(r in u){var f=u[r].apply(void 0,t);i=f[0],e=f[1],o.forEach(function(r){var n;(n=regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",r(i.name,e));case 1:case"end":return n.stop()}},n,void 0)}),function(){var r=n.apply(this,arguments);return new Promise(function(n,t){return function e(i,o){try{var a=r[i](o),u=a.value}catch(r){return void t(r)}if(!a.done)return Promise.resolve(u).then(function(r){e("next",r)},function(r){e("throw",r)});n(u)}("next")})})()})}},addSubscriber:function(r){o=[].concat(function(r){if(Array.isArray(r)){for(var n=0,t=Array(r.length);n<r.length;n++)t[n]=r[n];return t}return Array.from(r)}(o),[r])}}};return Object.freeze({make:r,summon:r})});
